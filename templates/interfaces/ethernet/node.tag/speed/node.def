type: txt
help: Set the speed for this interface
default: "auto"
syntax:expression: $VAR(@) in "auto", "10", "100", "1000", "2500", "10000"; "Speed must be auto, 10, 100, 1000, 2500, or 10000"
commit:expression: ( $VAR(@) == "auto" && $VAR(../speed/@) == "auto" ) || \
		   ( $VAR(@) != "auto" && $VAR(../speed/@) != "auto" ) ; \
              "if speed is hardcoded, duplex must also be hardcoded"
update: if [ "$VAR(@)" = "auto" ]
	then 
           if ! sudo ethtool $VAR(../@) | grep -q 'Auto-negotiation: on'
	   then sudo ethtool -s $VAR(../@) autoneg on
	   fi
        else 
           sudo ethtool -s $VAR(../@) \
	           speed $VAR(../speed/@) duplex $VAR(@) autoneg off
	fi
delete: if [ -d /sys/class/net/$VAR(../@) ]; then
           sudo ethtool -s $VAR(../@) autoneg on
	fi
